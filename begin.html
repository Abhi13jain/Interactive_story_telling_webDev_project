<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crossroads of Destiny</title>
    <style>
        /* Your CSS styles */
        html,body{
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background-color: #1a1a1a;
            color: #ffffff;
        }
        #outer{
            display: flex;
            flex-direction: column;
            height: 100%;
            width: 100%;
            background-color: #222831;
            overflow: hidden;
        }
        .one{
            display: flex;
            flex: 1;
            margin: 2px;
            background-color: #222831;
            border-radius: 10px;
            overflow: hidden;
        }
        #coverpage{
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 2px;
            border: 2px solid #4a4a4a;
            background-image: url("https://tse3.mm.bing.net/th/id/OIG3.HWGQHdIV9T8vo6n_8O_c?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn");
            background-size: 80% 100%;
            background-repeat: no-repeat;
            background-position: center;
            border-radius: 10px;
        }
        #storyline{
            flex: 1;
            display: flex;
            flex-direction: column; /* Adjusted to stack contents vertically */
            justify-content: center;
            align-items: center;
            margin: 2px;
            border: 2px solid #4a4a4a;
            background-size: 80% 100%;
            background-repeat: no-repeat;
            background-position: center;
            border-radius: 10px;
            padding: 20px; /* Added padding */
        }
        
        .three{
            display: flex;
            flex: 1;
            margin: 2px;
            position: relative;
            background-color: #222831;
            border-radius: 10px;
            overflow: hidden;
        }
        #images{
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 2px;
            border: 2px solid #4a4a4a;
            background-size: 70% 100%;
            background-position: center;
            background-repeat: no-repeat;
            overflow: hidden;
            border-radius: 10px;
        }
        #soundeffects {
            flex: 1;
            display: flex;
            justify-content: center; /* Add this to position elements at the ends */
            align-items: center;
            margin: 2px;
            border: 2px solid #4a4a4a;
            background-color: #000000;
            border-radius: 10px;
            position:relative;
        }
        
        /* .leftimage,
        .rightimage {
            width: 20%; /* Adjust the width as needed 
            height: 90%; /* Ensure images fill the height of the div 
            margin:5px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position:absolute;
            z-index: 1;
        } */
        /* .leftimage{
            background-image:url("file (2).png") ;
            left:0;
        }
        .rightimage{
            background-image:url("file (1).png");
            right:0;
        } */
        input[type="text"], button {
            margin-top: 10px;
            padding: 8px 8px;
            border: none;
            border-radius: 4px;
            font-size: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            background-color: #352a9b;
            color: white;
        }

        input[type="text"] {
            width: 200px;
            text-align: center;
            background-color: #333;
            color: white;
            border: 1px solid #3d3195;
        }

        button {
            background-color: #3c40aa;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #1925a4;
        }

        /* Story text */
        #storyline p {
            text-align: center;
            line-height: 1.2;
            font-size: 12px;
            max-width: 90%; /* Adjust the maximum width as needed */
        }
        @keyframes quiet {
  25%{
    transform: scaleY(.6);
  }
  50%{
    transform: scaleY(.4);
  }
  75%{
    transform: scaleY(.8);
  }
}

@keyframes normal {
  25%{
    transform: scaleY(1);
  }
  50%{
    transform: scaleY(.4);
  }
  75%{
    transform: scaleY(.6);
  }
}
@keyframes loud {
  25%{
    transform: scaleY(1);
  }
  50%{
    transform: scaleY(.4);
  }
  75%{
    transform: scaleY(1.2);
  }
}

.boxContainer{
  display: flex;
  justify-content: space-between;
  height: 64px;
  --boxSize: 8px;
  --gutter: 4px;
  width: calc((var(--boxSize) + var(--gutter)) * 5);
}

.box{
  transform: scaleY(.4);
  height: 100%;
  width: var(--boxSize);
  background: #12E2DC;
  animation-duration: 1.2s;
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
  border-radius: 8px;
}

.box1{
  animation-name: quiet;
}

.box2{
  animation-name: normal;
}

.box3{
  animation-name: quiet;
}

.box4{
  animation-name: loud;
}

.box5{
  animation-name: quiet;
}

    </style>
</head>
<body>
    <div id="outer">
        <div class="one">
            <div id="coverpage">
                <!-- Text or content here won't affect alignment -->
            </div>
            <div id="storyline">
                <!-- Text or content here won't affect alignment -->
            </div>
        </div>
        <div class="three">
            <div id="images">
                <!-- Text or content here won't affect alignment -->
            </div>
            <div id="soundeffects">
                <div class="boxContainer">
                    <div class="box box1"></div>
                    <div class="box box2"></div>
                    <div class="box box3"></div>
                    <div class="box box4"></div>
                    <div class="box box5"></div>
                  </div>
                <audio id="audioPlayer" controls style="display: none;">
                    <source src="" type="audio/mpeg">
                </audio>
            </div>
        </div>
    </div>
    <script>
        // Define the function for updating the story text in the div
        function updateStory(text) {
            const storyDiv = document.getElementById("storyline");
            storyDiv.innerHTML = "<p>" + text + "</p>";
        }
        
        // Define the function for updating the image in the div
        function updateImage(imageUrl) {
            const imagesDiv = document.getElementById("images");
            imagesDiv.style.backgroundImage = "url('" + imageUrl + "')";
        }

        // Function to play audio and call the next function when it ends
        function playAudioAndCallNext(audioUrl, nextFunction) {
            const audioPlayer = document.getElementById("audioPlayer");
            audioPlayer.src= audioUrl;
            audioPlayer.play();
            audioPlayer.onended = nextFunction;
        }
        document.addEventListener("DOMContentLoaded", function() {
            // Add event listener to a button or any other element to start the story
            const startButton = document.createElement("button");
            startButton.textContent = "Start Story";
            startButton.onclick = startStory;
            const storylineDiv = document.getElementById("storyline");
            storylineDiv.appendChild(startButton);    
        });

        // Start the story
        startStory();

        // Define the main function for the story
        function startStory() {
            updateStory("Welcome to 'The Crossroads of Destiny'. You are Alex, a weary traveler standing at the ancient Crossroads in the forest.");
            const initialImagePath = "https://tse1.mm.bing.net/th/id/OIG1.1fASdJkvyCmGb5PLsYFA?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn";
            updateImage(initialImagePath);
            const startingSound = "windopen.mp3";
            playAudioAndCallNext(startingSound,choosePath);
        }

        // Function to prompt the user to choose a path
        function choosePath() {
            updateStory("You face two paths: one shrouded in darkness and the other bathed in moonlight. Which path will you choose?");
            const cp = "https://tse1.mm.bing.net/th/id/OIG3._VA__zfKrCGWVEL87xGk?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn";
            updateImage(cp);
            // Add input for the user's choice
            const choiceInput = document.createElement("input");
            choiceInput.setAttribute("type", "text");
            choiceInput.setAttribute("id", "pathChoice");
            choiceInput.placeholder = "Type '1' for darkness or '2' for moonlight";
            storyline.appendChild(choiceInput);
            // Add button to submit choice
            const submitButton = document.createElement("button");
            submitButton.textContent = "Choose";
            submitButton.onclick = handleChoice;
            storyline.appendChild(submitButton);
            // Play audio
            playAudioAndCallNext("leftright.mp3", handleChoice);
        }

        // Function to handle the user's choice of paths
        function handleChoice() {
            let choice = document.getElementById("pathChoice").value.trim();
            if (choice === '1') {
                pathDarkness();
            } else if (choice === '2') {
                pathMoonlight();
            } else {
                updateStory("Invalid choice! Please type '1' or '2'.");
                choosePath();
            }
        }

        // Function for the path of darkness
        function pathDarkness() {
            updateStory("You chose the path shrouded in darkness.");
            updateStory("As you venture deeper into the darkness, you hear eerie whispers and feel a chill down your spine. Suddenly, you stumble upon a hidden cave with a glimmering treasure. As you reach for it, the ground gives way beneath you!");
            const pathdark = "https://tse2.mm.bing.net/th/id/OIG4._OGOnE_PreMlM.0NXI1W?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn";
            updateImage(pathdark);
            // End the story
            
            // Play audio
            playAudioAndCallNext("entercave.mp3", endStory);
        }

        // Function for the path of moonlight
        function pathMoonlight() {
            updateStory("You chose the path bathed in moonlight.");
            updateStory("You follow the path illuminated by the gentle moonlight. The forest feels serene and peaceful. As you continue, you encounter a babbling brook where a weary traveler rests. They offer you a map to your destination.");
            const moonlit = "https://tse2.mm.bing.net/th/id/OIG2.m1zqzC6wMbq_Z_HJvpUh?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn";
            updateImage(moonlit);
            // Continue the journey
            // setTimeout(continueJourney, 5000);
            // Play audio
            playAudioAndCallNext("pathmoonlight.mp3", continueJourney);
        }

        // Function to continue the journey after choosing the path of moonlight
        function continueJourney() {
            updateStory("You thank the traveler and continue your journey. Ahead, you encounter another fork in the road.");
            const continuej = "https://tse1.mm.bing.net/th/id/OIG1.rBWYjlQOLDPk0w5NJzni?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn";
            updateImage(continuej);
            // Handle the next choice
            handleNextChoice();
            // Play audio
            playAudioAndCallNext("continuejourney.mp3", handleNextChoice);
        }

        // Function to handle the next choice in the journey
        function handleNextChoice() {
            updateStory("You encounter another fork in the road. Will you go left or right?");
            // Add input for the user's choice
            const choiceInput = document.createElement("input");
            choiceInput.setAttribute("type", "text");
            choiceInput.setAttribute("id", "nextChoice");
            choiceInput.placeholder = "Type '1' for left or '2' for right";
            storyline.appendChild(choiceInput);
            // Add button to submit choice
            const submitButton = document.createElement("button");
            submitButton.textContent = "Choose";
            submitButton.onclick = handleNextChoiceSubmit;
            storyline.appendChild(submitButton);
            // Play audio
            playAudioAndCallNext("continuejourney.mp3", handleNextChoiceSubmit);
        }

        // Function to handle the next choice in the journey
        function handleNextChoiceSubmit() {
            let choice = document.getElementById("nextChoice").value.trim();
            if (choice === '1') {
                pathLeft();
            } else if (choice === '2') {
                pathRight();
            } else {
                updateStory("Invalid choice! Please type '1' or '2'.");
                handleNextChoice();
            }
        }

        // Function for the left path
        function pathLeft() {
            updateStory("You chose the left path.");
            updateStory("As you follow the left path, you come across a dense thicket of thorns blocking your way. You can try to cut through it or find an alternate route.");
            const left = "https://tse4.mm.bing.net/th/id/OIG3.PQvd8G.6nvDFYET1SwFz?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn";
            updateImage(left);
            // Handle the user's choice
            // Add input for the user's choice
            const choiceInput = document.createElement("input");
            choiceInput.setAttribute("type", "text");
            choiceInput.setAttribute("id", "leftPathChoice");
            choiceInput.placeholder = "Type '1' to cut through or '2' to find an alternate route";
            storyline.appendChild(choiceInput);
            // Add button to submit choice
            const submitButton = document.createElement("button");
            submitButton.textContent = "Choose";
            submitButton.onclick = handleLeftPathChoice;
            storyline.appendChild(submitButton);
            // Play audio
            playAudioAndCallNext("bushrustle.mp3", handleLeftPathChoice);
        }

        // Function to handle the user's choice in the left path
        function handleLeftPathChoice() {
            let choice = document.getElementById("leftPathChoice").value.trim();
            if (choice === '1') {
                updateStory("You decide to cut through the thicket, but it proves to be too dense and impassable. Exhausted and frustrated, you try to find new way.");
                const left1 = "https://tse2.mm.bing.net/th/id/OIG1.Vn_SQPO9LUCGKkthGGgl?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn";
                updateImage(left1);
                playAudioAndCallNext("bushcut.mp3",afterFirstLeftchoice);
            } else if (choice === '2') {
                updateStory("You choose to find an alternate route. After some searching, you discover a hidden path that leads you safely past the thicket.");
                const left2 = "https://tse1.mm.bing.net/th/id/OIG1.WT3OTE52Owy8coJbvFke?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn";
                updateImage(left2);
                playAudioAndCallNext("calm.mp3",afterFirstLeftchoice);
            } else {
                updateStory("Invalid choice! Please type '1' or '2'.");
                pathLeft();
            }
        }

        // Function for cutting through the thorns
        function afterFirstLeftchoice(){
            updateStory("While searching for a new route, the traveler could stumble upon a hidden trail veiled by overgrown foliage. This discovery could offer hope and excitement as they embark on this new path, uncertain of where it might lead.");
            const l1i="https://tse2.mm.bing.net/th/id/OIG2._YhPfMWwdUdZJRRWBMeA?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn"
            updateImage(l1i);
            playAudioAndCallNext("breathing.mp3", contfirstLchoice);

        }

        // Function for finding an alternate route
        function contfirstLchoice(){
            updateStory("After discovering the hidden trail, the traveler stumbles upon ancient ruins deep within the forest. These ruins could hold clues about the forest's history or provide shelter for the traveler. As they explore the ruins, they uncover secrets of the past, perhaps finding artifacts or inscriptions that offer hints about the forest's mysteries.");
            const cl1i="https://tse3.mm.bing.net/th/id/OIG4.KkE3sVkw9x.KYEDoEKRo?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn";
            updateImage(cl1i);
            playAudioAndCallNext("mystery.mp3", endFirstLchoice);
        }
        function endFirstLchoice(){
            updateStory("As the traveler explores the ancient ruins, they unravel the secrets of the forest's past, each artifact and inscription offering tantalizing hints about the mysteries that lie within. With newfound knowledge in hand, they continue their journey, driven by curiosity and a sense of adventure.");
            const el1i="https://tse2.mm.bing.net/th/id/OIG4.6Hw9HeU9J_MqtblQobcs?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn";
            updateImage(el1i);
            playAudioAndCallNext("endmystery.mp3", endStory);
        }
        // Function for the right path
        function pathRight() {
            updateStory("You chose the right path.");
            updateStory("As you follow the right path, you hear a faint rustling in the bushes. You can investigate or keep moving forward.");
            const right = "https://tse3.mm.bing.net/th/id/OIG2.iw9ZzamHruLv_2Z3eFuTLQ?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn";
            updateImage(right);
            // Handle the user's choice
            // Add input for the user's choice
            const choiceInput = document.createElement("input");
            choiceInput.setAttribute("type", "text");
            choiceInput.setAttribute("id", "rightPathChoice");
            choiceInput.placeholder = "Type '1' to investigate or '2' to keep moving forward";
            storyline.appendChild(choiceInput);
            // Add button to submit choice
            const submitButton = document.createElement("button");
            submitButton.textContent = "Choose";
            submitButton.onclick = handleRightPathChoice;
            storyline.appendChild(submitButton);
            // Play audio
            playAudioAndCallNext("wolf.mp3", handleRightPathChoice);
        }

        // Function to handle the user's choice in the right path
        function handleRightPathChoice() {
            let choice = document.getElementById("rightPathChoice").value.trim();
            if (choice === '1') {
                updateStory("You choose to confront the wolves, but they prove to be too fierce and overwhelming. Injured, you retreat and search for an alternate route.");
                const r1="https://tse3.mm.bing.net/th/id/OIG3.9D25Uq.2n0pKDFBkHuz_?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn";
                updateImage(r1);
                playAudioAndCallNext("injured.mp3", continueJourney);
            } else if (choice === '2') {
                updateStory("You decide to try to sneak past the wolves. With careful planning and stealth, you manage to evade them and continue on your journey.");
                const r2="https://tse3.mm.bing.net/th/id/OIG3.IqiwvQrz0Dff1Wa3Gb4n?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn";
                updateImage(r2);
                playAudioAndCallNext("softfootsteps.mp3", continueJourney2);
            } else {
                updateStory("Invalid choice! Please type '1' or '2'.");
                pathRight();
            }
        }

        // Function for investigating the rustling
        function continueJourney2() {
            updateStory("You press on, overcoming obstacles and facing new challenges.");
            // For simplicity, we'll end the story here
            // Play audio
            const c2="https://tse3.mm.bing.net/th/id/OIG3.nJZj91yPrmRIKFVbuy_M?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn";
            updateImage(c2);
            playAudioAndCallNext("motivation.mp3", endStory);
        }

        // Function for keeping moving forward
        

        // Function to end the story
        function endStory() {
            updateStory("Congratulations! You have reached the end of 'The Crossroads of Destiny'. Your destiny awaits beyond the gate.");
            const end = "https://tse2.mm.bing.net/th/id/OIG3.CpN0iDzNt_HCTlZmjXZX?w=270&h=270&c=6&r=0&o=5&dpr=1.3&pid=ImgGn";
            updateImage(end);
            playAudioAndCallNext("endf.mp3", restartStory);
        }
        function restartStory() {
            // Clear the story div
            document.getElementById("storyline").innerHTML = "";
            // Restart the story
            startStory();
        }
    </script>
</body>
</html>
